<div class="mask" *ngIf="edenService.requestEnv"></div>

<div class="header">
  <nz-breadcrumb>
    <nz-breadcrumb-item>
      <a (click)="path=null">
        {{ "SIDERBAR.MAIL" | translate }}
      </a>
    </nz-breadcrumb-item>
    <nz-breadcrumb-item *ngIf="path==='inbox'">
      {{ "MAIL.INBOX" | translate }}
    </nz-breadcrumb-item>
    <nz-breadcrumb-item *ngIf="path==='outbox'">
      {{ "MAIL.OUTBOX" | translate }}
    </nz-breadcrumb-item>
  </nz-breadcrumb>
  <button *ngIf="edenService.mail.outbox" nz-button nzSize="large" nzType="primary" (click)="sendMessage()">发送邮件</button>
</div>
<div class="content">
  <ng-container *ngIf="!path">
    <div *ngIf="edenService.mail.inbox" class="folder inbox" (dblclick)="openInbox()">
      <i class="icon inbox"></i>
      {{ "MAIL.INBOX" | translate }}
    </div>
    <div *ngIf="edenService.mail.outbox" class="folder outbox" (dblclick)="openOutbox()">
      <i class="icon outbox"></i>
      {{ "MAIL.OUTBOX" | translate }}
    </div>
    <ng-container *ngIf=" !edenService.mail.inbox && !edenService.mail.outbox">
    </ng-container>
  </ng-container>
  <ng-container *ngIf="path==='inbox' || path === 'outbox'">
    <nz-table [nzData]="mails" #mailsTable>
      <thead>
        <tr>
          <!-- <th></th> -->
          <th *ngIf="path==='inbox'">{{ "MAIL.SENDER" | translate }}</th>
          <th *ngIf="path==='outbox'">{{ "MAIL.RECEIVER" | translate }}</th>
          <th>{{ "MAIL.TITLE" | translate }}</th>
          <th>{{ "MAIL.STORAGE" | translate }}</th>
          <th>{{ "MAIL.SEND_TIME" | translate }}</th>
          <th>{{ "MAIL.RECEIVE_TIME" | translate }}</th>
          <th>{{ "MAIL.OPERATION" | translate }}</th>
        </tr>
      </thead>
      <tbody>
        <tr *ngFor="let mail of mailsTable.data">
          <!-- <td>已读未读</td> -->
          <td *ngIf="path==='inbox'">{{mail.fromAddress}}</td>
          <td *ngIf="path==='outbox'">{{mail.toAddress}}</td>
          <td>{{mail.fileName}}</td>
          <td>{{mail.fileSize | humanSize }}</td>
          <td>{{mail.created | date }}</td>
          <td>{{mail.agreeTime | date }}</td>
          <td *ngIf="path==='outbox' || mail.reject">
            <a (click)="showMessage(mail)"><i nz-icon type="eye" theme="outline"></i></a>
            &nbsp;
            <a (click)="deleteMessage(mail)"><i nz-icon type="delete" theme="outline"></i></a>
          </td>
          <td *ngIf="path==='inbox' && !mail.reject">
            <a (click)="signInMessage(mail)">签收</a>
          </td>
          <td></td>
        </tr>
      </tbody>
    </nz-table>
  </ng-container>
</div>


<app-dialog name="edenNeedPass" *ngIf="edenService.requestEnv" (nameChange)="edenService.requestEnv = false" [opt]="'MODEL.EDEN_NEED_PASS' | translate"></app-dialog>
<app-dialog [(name)]="edenDialogName" [opt]="edenDialogOpt"></app-dialog>
